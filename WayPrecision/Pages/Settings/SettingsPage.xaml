<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:shapes="clr-namespace:Microsoft.Maui.Controls.Shapes;assembly=Microsoft.Maui.Controls"
             x:Class="WayPrecision.SettingsPage"
             Title="Configuración">

    <ScrollView>
        <!-- Contenido principal en la parte superior -->
        <VerticalStackLayout Spacing="12" Padding="12">

            <!-- Sección: Localización GPS -->

            <VerticalStackLayout Spacing="8">
                <Label Text="Localización GPS" FontAttributes="Bold" FontSize="Medium" />
                <BoxView HeightRequest="1" Color="LightGray" HorizontalOptions="Fill" Margin="0,4,0,8" />

                <Label Text="Intervalo de posición GPS" FontAttributes="Bold" />
                <Label Text="Rango: 1 – 15 segundos." FontAttributes="Italic" />
                <Label Text="Intervalos más cortos mejoran la precisión pero consumen más batería." FontAttributes="Italic" />
                <Entry x:Name="GpsIntervalEntry"
                               Keyboard="Numeric"
                               Placeholder="Introduce el intervalo en segundos" />

                <Label Text="Precisión mínima requerida"  FontAttributes="Bold" />
                <Label Text="Rango: 1 – 20 metros." FontAttributes="Italic" />
                <Label Text="Mayor precisión mejora el cálculo geométrico pero rechaza más posiciones." FontAttributes="Italic" />
                <Entry x:Name="GpsAccuracyEntry"
                               Keyboard="Numeric"
                               Placeholder="Introduce la precisión en metros" />
            </VerticalStackLayout>

            <!-- Sección: Cálculo Geométrico -->

            <VerticalStackLayout Spacing="8" Padding="0,15,0,0">
                <Label Text="Cálculo Geométrico" FontAttributes="Bold" FontSize="Medium" />
                <BoxView HeightRequest="1" Color="LightGray" HorizontalOptions="Fill" Margin="0,4,0,8" />
                <Label Text="Unidad de área"  FontAttributes="Bold" />
                <Picker x:Name="AreaUnitsPicker" />

                <Label Text="Unidad de longitud"  FontAttributes="Bold" />
                <Picker x:Name="LengthUnitsPicker" />
            </VerticalStackLayout>

            <!-- Sección: Trazados -->
            <VerticalStackLayout Spacing="8" Padding="0,15,0,0" HorizontalOptions="Fill">
                <Label Text="Trazados" FontAttributes="Bold" FontSize="Medium" />
                <BoxView HeightRequest="1" Color="LightGray" HorizontalOptions="Fill" Margin="0,4,0,8" />

                <Label Text="Suavizado Kalman" FontAttributes="Bold" />
                <Label Text="Aplica un filtro para reducir el ruido del GPS y suavizar la ruta haciendo que el recorrido se vea más natural, sin zigzags ni cambios bruscos." FontAttributes="Italic" />

                <!-- Grid para alinear etiqueta a la izquierda y switch a la derecha (compatible con .NET 9) -->
                <Grid ColumnDefinitions="*,Auto">
                    <Switch x:Name="KalmanSwitch"
                     IsToggled="False"
                     Grid.Column="0"
                     HorizontalOptions="End"
                     VerticalOptions="Center"
                            OnColor="{StaticResource Primary300}"
                            ThumbColor="{StaticResource Primary500}"/>
                    <Label Text="Habilitar Suavizado Kalman"
                           Grid.Column="0"
                           VerticalTextAlignment="Center"
                           VerticalOptions="Center" />
                </Grid>
            </VerticalStackLayout>

            <Button Text="Guardar"
                     x:Name="SaveButton"
                     Style="{StaticResource PrimaryButton}"
                     Margin="0,24,0,0" />

            <Button x:Name="CancelarButton"
                     Text="Cancelar"
                     Style="{StaticResource TertiaryButton}" />
        </VerticalStackLayout>
    </ScrollView>
</ContentPage>